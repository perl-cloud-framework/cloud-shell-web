<html>
<head>
<title>Cloud Shell WEB</title>
<link rel="stylesheet" href="layout.css" type="text/css"></link>
<link href="js/jquery-ui.css" rel="stylesheet" type="text/css"></link>
<script type="text/javascript" src="js/jquery-1.4.2.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script type="text/javascript" src="js/jQote2/jquery.jqote2.js"></script>
</head>

<body>

<!-- The user's header -->
<div id="body">

<div id="header">
	<img id="logo" src="logo.png" />
	<div id="user-info">
	Logged in as X (<a id="signout">sign out</a>)
	</div>
</div>

<!-- Instance list -->
<div id="instance-list-panel">
<ul>
<li>Instance List:</li>
</ul>
</div>

<!-- Information about an instance -->
<div id="instance-info-panel">
You should never see this.
</div>

<div id="footer">
	Copyright &copy; 2010, GrokThis.net, VPS Village<sup>TM</sup>. All rights reserved.
</div>

<div id="result">
</div>

</div><!-- /body -->

<script type="text/html" id="template-container">
<![CDATA[
<div class="<%= this.class %>">
<%= this.content %>
</div>
]]>
</script>


<script type="text/html" id="template-instance-list-entry">
<![CDATA[
 <li>
  <u><%= this.type %></u><br/>
  Instance ID: <%= this.id %><br/>
  RAM: <%= this.ram %>MB, Disk: <%= this.disk %>GB
 </li>
]]>
</script>

<script type="text/html" id="template-instance-null">
<![CDATA[
  Please select an instance from the left-hand navigation.<hr/>

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent semper semper erat. Duis pellentesque bibendum tortor eget dignissim. Morbi sapien ante, imperdiet et placerat eu, pellentesque a enim. Integer accumsan justo a dolor posuere fermentum. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec nunc purus, mollis sit amet varius in, vulputate nec velit. Mauris dui enim, vestibulum pellentesque imperdiet et, sodales quis augue. Nunc dapibus mi ut lorem tempus sit amet ornare quam aliquet. Mauris adipiscing lacinia diam in tincidunt. Pellentesque ultricies mi non sem fermentum vitae auctor sem cursus. Etiam malesuada dignissim felis, in congue enim pharetra ut. Ut vulputate congue nisi, in pellentesque orci adipiscing ullamcorper. Nulla bibendum rhoncus nulla vitae semper. Integer mollis, elit vel feugiat mollis, nulla dolor suscipit mi, ac vehicula metus ipsum id dui. Nunc sed dui venenatis arcu vestibulum iaculis in ac ligula. Suspendisse bibendum tortor eu quam dignissim hendrerit. In hac habitasse platea dictumst. Duis et eros dui. 
]]>
</script>

<script type="text/html" id="template-instance-notes">
<![CDATA[
<!-- Load Notes -->
<h2>Notes</h2>
<form onsubmit="
	var ta=$(textarea).text;
	var txt=ta.text();
	ta.fadeOut();
	pre.text(txt).fadeIn()
">
<a onclick="
	var pre=$('pre');
	$(pre).fadeOut(100, function() {
		$('textarea').val($(pre).text()).parent().fadeIn();
	});
	//.fadeIn();
">edit</a>
<pre>
<%= this.content %>
</pre>
<div class="hidden">
<textarea></textarea>
<button value="Done" onclick="submit()">Done</button>
</div>
</form>
]]>
</script>

<script type="text/html" id="template-instance">
<![CDATA[
  <div class="padded">
  <h2>Instance ID: </h2>
  <div id="tabs">
   <ul>
   <li><a href="instance-control"><span>Manage</span></a></li>
   <li><a href="instance-billing"><span>Billing</span></a></li>
   <li><a href="instance-history"><span>History</span></a></li>
   <li><a href="instance-notes"><span>Notes</span></a></li>
   <li><a href="instance-scripts"><span>Scripts</span></a></li>
   </ul>
  </div>
  </div>
]]>
</script>

<script type="text/html" id="template-instance-scripts">
<![CDATA[
 <div id="instance-scripts">
 <h2>Saved Scripts</h2>
 <table>
  <tr>
  <th>Name</th>
  <th>Language</th>
  <th>Size</th>
  <th><!-- Actions --></th>
  </tr>
  <%= this.scripts %>
 </table>

 <button>Scheduler</button>
 <button>Find scripts</button>
 <button>Upload new script</button>
 </div>
]]>
</script>


<script type="text/html" id="template-instance-control">
<![CDATA[
  <form>
   Status:
   <select>
    <option>Running</option>
    <option>Reboot</option>
    <option>Shutdown</option>
    <option>Power-Off</option>
    <option>Delete</option>
   </select>
  </form>
  <hr/>
  <div class="instance-info">
	<div class="rightcol">
	<ul>
	<li>Runtime Averages (history)</li>
	<li>Uptime: XXX</li>
	<li>CPU Utilization: XXX %</li>
	<li>Network I/O: XXX %</li>
	<li>Disk I/O: XXX</li>
	</ul>

	<ul>
	<li>Network Information</li>
	   <!-- Information about this instance. -->
	<li>IPv4 Addresses: XX (manage)</li>
	<li>IPv6 Addresses: XX (manage)</li>
	</ul>
	</div>

	<div class="leftcol">
	<ul>
	<li>Instance Settings</li>
	   <!-- Information about this instance. -->
	<li>Plan: XXX</li>
	<li>Memory (RAM): <span id="memslider-val"></span><div id="memslider"></div></li>
	<li>Persistent Storage: <span id="diskslider-val"></span><div id="diskslider"></div></li>
	<li>Operating System:<br/>unknown (<a id="osselect">change</a>)</li>
	<li>Boot Loader:<br/>xen-pv (<a id="bootselect">change</a>)</li>
	</ul>
	</div>
  </div>

  <div class="instance-controls">
   <button>Access Serial Console</button>
   <button>(Re-)Install Operating System</button>
   <button>Modify IP Addresses</button>
  </div>


]]>
</script>

<script type="text/html" id="instance-settings">
<![CDATA[
   Modify Settings
   
  </div>
  <div class="instance-actions-running">
   <!-- Information only available to a running instance (uptime, etc) -->

  </div>
  <div class="instance-actions-shutdown">
   <!-- Actions for shutdown -->
   Reimage
  </div>
 </div>
]]>
</script>

<script type="text/javascript">

function getURL (u) {
	$.ajax({
		url: u,
		success: function(data) {
			$('#result').html(data);
		},
		async: false,
		dataType: 'html' 
	});
	//alert($('#result').text());
	return $('#result').text();
}

/* On page load */
$(document).ready(function() {
	// Handler for .ready() called.

	//alert(getURL('t/container.html'));
	//var container=getURL('t/container.html');

	// Window height, minus header
	var conheight=$(window).height()-$('#header').outerHeight()-$('#footer').outerHeight();

	/* The instance info panel will
	   be initialized with the instance selector */
	$('#instance-info-panel').jqotesub("#template-container", { content: $('#template-instance-null').jqote( { } ), class: 'padded' })
	//$('#instance-info-panel').jqotesub(container, { content: $('#template-instance-null').jqote( { } ), class: 'padded' })
		.css("height",conheight);

	/* Load the list of instances into the list panel */
	$('#instance-list-panel').jqoteapp('#template-instance-list-entry', { 
		id: 10,
		type: 'Village Small',
		ram: 96,
		disk: 4
	} )
	.jqoteapp('#template-instance-list-entry', { 
		id: 11,
		type: 'Village Medium',
		ram: 320,
		disk: 8
	} )
	.css("height",conheight)
	.find('li').click(function() {
		/* Toggle clicked */
		$(this).parent().children().removeClass('clicked');
		$(this).addClass('clicked');

		/* Load info panel */
		$('#instance-info-panel').jqotesub($('#template-instance'), {}).find("#tabs").tabs( {
			/* Tried using select, but this makes it easier to run load() against this,
			   allowing a default initalization of the tab... */
			load: function(event, ui) {
			 var name=$.data(ui.tab, 'load.tabs');
			 $('#'+ui.panel.id).jqotesub('#template-'+name, {});
			 $('#memslider').slider( { step: 512, min: 512, max: 4096, slide: function (event, ui) {
				$('#memslider-val').text(ui.value+" MB");
				return true;
			 } } );
			 $('#diskslider').slider( { step: 16, min: 16, max: 1024, slide: function (event, ui) {
				$('#diskslider-val').text(ui.value+" GB");
				return true;
			} } );
			 return true;
			}
		}).load();

		return false;
	});


});

</script>

</body>
</html>
